<link rel="stylesheet" type="text/css" href="<?php echo BASE_ASSET?>datatables/datatables.min.css"/>
 
<script type="text/javascript" src="<?php echo BASE_ASSET?>datatables/datatables.min.js"></script>
<script src="<?= BASE_ASSET; ?>/js/jquery.hotkeys.js"></script>
<script type="text/javascript">
	//This page is a result of an autogenerated content made by running test.html with firefox.
	function domo() {
		// Binding keys
		$('*').bind('keydown', 'Ctrl+e', function assets() {
			$('#btn_edit').trigger('click');
			return false;
		});

		$('*').bind('keydown', 'Ctrl+x', function assets() {
			$('#btn_back').trigger('click');
			return false;
		});
	}

	jQuery(document).ready(domo);
</script>
<!-- Content Header (Page header) -->
<section class="content-header">
	<h1>Kecamatan <small><?= cclang('detail', ['Kecamatan']);?> </small></h1>
	<ol class="breadcrumb">
		<li><a href="javascript:void(0);"><i class="fa fa-dashboard"></i> Home</a></li>
		<li><a href="<?= site_url('administrator/kecamatans'); ?>">Kecamatan</a></li>
		<li class="active"><?= cclang('detail'); ?></li>
	</ol>
</section>
<!-- Main content -->
<section class="content">
	<div class="row">
		<div class="col-md-12">
			<div class="box box-danger">
				<div class="box-header with-border">
					<h3 class="box-title">Detail Kecamatan</h3>
					<div class="pull-right">
				<?php 
					is_allowed('kecamatans_update', function() use ($kecamatans) {
				?>
						<a class="btn btn-flat btn-primary btn_edit btn_action" id="btn_edit" data-stype='back' title="edit kecamatans (Ctrl+e)"
							href="<?= site_url('administrator/kecamatans/edit/'.$kecamatans->kecamatan_id); ?>">
								<i class="fa fa-edit"></i> <?= cclang('update', ['Kecamatans']); ?> </a>
				<?php
					});
				?>
						<a class="btn btn-flat btn-default btn_action" id="btn_back" title="back (Ctrl+x)" href="<?= site_url('administrator/kecamatans/'); ?>">
							<i class="fa fa-undo"></i> <?= cclang('go_list_button', ['Kecamatans']); ?></a>
					</div>
				</div>
				<div class="box-body">
					<dl class="dl-horizontal" name="form_kecamatans" id="form_kecamatans">
						<dt>ID</dt>
						<dd><b>: </b><?= _ent($kecamatans->kecamatan_id); ?></dd>
						<dt>Nama Kecamatan</dt>
						<dd><b>: </b><?= _ent($kecamatans->kecamatan_nama); ?></dd>
					</dl>
				</div>
				<!--/box body -->
			</div>
			<!--/box -->
		</div>
	</div>
	<div class="row">
		<div class="col-md-12">
			<div class="box box-danger">
				<div class="box-header with-border">
					<h3 class="box-title">Data Kelurahan wilayah Kecamatan <?= _ent($kecamatans->kecamatan_nama); ?></h3>
				</div>
				<div class="box-body">
		<?php
			is_allowed('kelurahans_add', function() use ($kecamatans){
		?>
								<a class="btn btn-flat btn-success btn_add_new" id="btn_add_new" title="<?= cclang('add_new_button', [cclang('kelurahans')]); ?>  (Ctrl+a)" href="<?=  site_url('administrator/kelurahans/add').'?id='.$kecamatans->kecamatan_id; ?>">
									<i class="fa fa-plus-square-o"></i><?= cclang('add_new_button', [cclang('kelurahans')]); ?></a>
		<?php 
			});

			is_allowed('kelurahans_export', function() {
		?>
								<a class="btn btn-flat btn-success" title="<?= cclang('export'); ?> <?= cclang('kelurahans') ?> " href="<?= site_url('administrator/kelurahans/export?q='.$this->input->get('q').'&f='.$this->input->get('f')); ?>">
									<i class="fa fa-file-excel-o"></i> <?= cclang('export'); ?> XLS</a>
		<?php
			});
		?>
							<br/><br/>
					<table class="table table-bordered table-striped dataTable">
						<thead>
							<tr>
								<th width="50"><?= cclang('nomor');?></th>
								<th><?= cclang('kelurahan_nama');?></th>
								<th>Action</th>
							</tr>
						</thead>
						<tbody>
					<?php
						if (count($kelurahans) > 0) {
							$no = 1; 
							foreach($kelurahans as $kelurahan) {
					?>
							<tr>
								<td width="50"><?php echo $no++;?></td>
								<td><?php echo _ent($kelurahan->kelurahan_nama);?></td>
								<td width="200">
							<?php 
								is_allowed('kelurahans_update', function() use ($kelurahan) {
							?>
									<a href="<?= site_url('administrator/kelurahans/edit/' . $kelurahan->kelurahan_id).'?id='.$kelurahan->kecamatan_id;?>" class="label-default">
										<i class="fa fa-edit "></i> <?= cclang('update_button');?>
									</a>
							<?php
								});

								is_allowed('kelurahans_delete', function() use ($kelurahan) {
							?>
									<a href="javascript:void(0);" data-href="<?= site_url('administrator/kelurahans/delete/' . $kelurahan->kelurahan_id).'?id='.$kelurahan->kecamatan_id;?>" class="label-default remove-data">
										<i class="fa fa-close"></i> <?= cclang('remove_button'); ?></a>
							<?php
								});
							?>
								</td>
							</tr>
					<?php 
							}
						} else {
					?>
							<tr>
								<td colspan="3">Kelurahan data is not available</td>
							</tr>
					<?php 
						}
					?>
						</tbody>
					</table>
				</div>
			</div>
		</div>
	</div>
</section>
<!-- /.content -->

<script type="text/javascript">
	$(document).ready(function () {
		$('.remove-data').click(function () {
			var url = $(this).attr('data-href');

			swal({
				title: "<?= cclang('are_you_sure'); ?>",
				text: "<?= cclang('data_to_be_deleted_can_not_be_restored'); ?>",
				type: "warning",
				showCancelButton: true,
				confirmButtonColor: "#DD6B55",
				confirmButtonText: "<?= cclang('yes_delete_it'); ?>",
				cancelButtonText: "<?= cclang('no_cancel_plx'); ?>",
				closeOnConfirm: true,
				closeOnCancel: true
			},
			function (isConfirm) {
				if (isConfirm) {
					document.location.href = url;
				}
			});

			return false;
		});

		$('.dataTable').DataTable({
			'processing' 	: true,
			'retrieve' 		: true,
			"pageLength" 	: 20,
			"lengthChange" 	: false,
			'columnDefs': [
				{ 
					'targets' 	: [ 0 ], 
					'orderable' : false,
				},
			],
			'language' : {
							'url' : 'https://cdn.datatables.net/plug-ins/1.10.16/i18n/Indonesian.json'
			}

		});
	});
</script>